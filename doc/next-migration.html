<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<head>
<title>Migration Guide from XOTcl to the Next Scripting Language</title>
<style>
body	{
        font-family: Verdana, Arial, Helvetica, sans-serif;
    	font-weight: normal;
	background-color : white;
	color: black;
}
table i {
     font-size: 85%;
}
table td code i {
     font-style: italic;
     color: green;
}
table td i.comment {
     font-style: italic;
     color: #888888;
}
pre.code {
  border: 1px solid grey;
  padding: 20px 60px;
}
pre i {
     font-style: italic;
     color: green;
}
p.caption {text-align: center;}
th {color: #888888;}
td hr {
  color: #FFFFFF;
  border-bottom-style: none;
  border-left-style: none;
  border-right-style: none;
  border-top-style: dashed;
  border-color: #AAAAAA;
  margin: 10 10 10 10;
}


/*table {font-size: 80%;}*/
table {
   width: 900;
   border-collapse:collapse;
}
table th {
   width: 400;
   border:1px solid black;
}
table td {
   width: 400;
   padding: 10px;
   border:1px solid #AAAAAA;
}

</style>
</head>

<body>
<h1>Migration Guide for the the Next Scripting Language</h1>
<p>
... general text, maybe partly from slides/paper ....
TODO: Maybe we should not refer to ::nsf here and import instead
the "needed" commands into ::nx namespace.
<p>In general, the Next Scripting Language differs from XOTcl in the following
respects:

<ul>
  <li> The Next Scripting Language has a much smaller
  interface (less predefined methods) than XOTcl.<p>
  
  <li> The Next Scripting Language favors a stronger form of
  encapsulation than XOTcl. Calling the own methods or accessing the
  own instance variables is typographically easier and computationally
  faster than these operations on other objects. This behavior is
  achieved via resolvers an makes the definition of methods necessary
  in XOTcl obsolete. On the other hand, XOTcl is complete symmetrical
  in this respect.

  <p>The encapsulation of Next Scripting is weak; a programmer can still
  access e.g. other variables via some idioms, but this makes these
  accesses implicit and is more typing effort.  Through the weak
  encapsulation a programmer should be encouraged to implement
  methods to provide access to instance variables.<p>

  <li> The Next Scripting Language provides means of method
  protection.<p>

  <li> The Next Scripting Language provides scripted init blocks for
  objects and classes (replacement for the somewhat dangerous dash "-"
  mechanism in XOTcl that allows to set
  variables and invoke methods upon object creation).<p>

  <li> The Next Scripting Language provides much more orthogonal means
  to define and name scripted and c-implemented methods.<p>

  <li> The Next Scripting Language provides an orthogonal framework for
  parametrization of methods and objects.<p>

</ul>  

<pre CLASS="code">
<strong>Class create</strong> Stack {

   <strong>:method init</strong> {} {
     <strong>set</strong> :things ""
   } 

   <strong>:public method</strong> push {thing} {
      <strong>set</strong> :things [<strong>linsert</strong> ${:things} 0 $thing] 
      <strong>return</strong> $thing
   }
  
   <strong>:public method</strong> pop {} {
      <strong>set</strong> top [<strong>lindex</strong> ${:things} 0]
      <strong>set</strong> :things [<strong>lrange</strong> ${:things} 1 end]
      <strong>return</strong> $top
   }
}
</pre>
<p class='caption'><strong>Figure 1:</strong> Stack example in the Next Scripting Language</p>


<pre CLASS="code">
<strong>Class</strong> Stack

Stack <strong>instproc init</strong> {} {
   <strong>my instvar</strong> things
   <strong>set</strong> things ""
} 

Stack <strong>instproc </strong> push {thing} {
   <strong>my instvar</strong> things
   <strong>set</strong> things [<strong>linsert</strong> $things 0 $thing] 
   <strong>return</strong> $thing
}
  
Stack <strong>instproc</strong> pop {} {
   <strong>my instvar</strong> things
   <strong>set</strong> top [<strong>lindex</strong> $things 0]
   <strong>set</strong> things [<strong>lrange</strong> $things 1 end]
   <strong>return</strong> $top
}
</pre>
<p class='caption'><strong>Figure 2:</strong> Stack example in XOTcl</p>

<h2>Using XOTcl 2.0 and the Next Scripting Language in the Next
Scripting Framework in a Single Interpreter</h2>

<p> In general, the Next Scripting Framework supports multiple object
systems concurrently. Effectively, every object system has different
base classes for creating objects and classes. Therefore, these object
systems can have different different interfaces and names of built-in
methods. Currently, the Next Scripting Framework supports primarily
XOTcl 2.0 (highly compatible with XOTcl 1.*) and the Next Scripting
Language (XOTcl provides about twice as many predefined built-in
methods compared to the Next Scripting Language).  </p>

<p> A single Tcl interpreter can host both, XOTcl and the Next
Scripting Language at the same time. This makes migration
from XOTcl to Next easier. The following example script shows to use
in a single script XOTcl and Next:
<p>

<pre>
   namespace eval mypackage {

      package require XOTcl 2.0

      <i># Import XOTcl into the current namespace</i>
      namespace import -force ::xotcl::*

      <i># Define a class using XOTcl</i>
      Class C1
      C1 instproc foo {} {puts "hello world"}

      <i># Import Next into the current namespace</i>
      namespace import -force ::nx::*

      <i># Define a class using Next</i>
      Class create C2 {
         :public method foo {} {puts "hello world"}
      }
   }
</pre>

<p> "Switching" between XOTcl and Next effectively means the load some
packages (if needed) and to import either the base classes
(<code>Object</code> and <code>Class</code>) of XOTcl or Next
into the current namespace. </p>

<h1>XOTcl Idioms in the Next Scripting Language</h1>

<h2>Defining Objects and Classes</h2>
<table>
  <tr><th>XOTcl</th><th>Next Scripting Language</th></tr>
  <tr>
    <td><code>Class <i>ClassName</i></code></td>
    <td><code>Class create <i>ClassName</i></code></td>
  </tr>
  <tr>
    <td><code>Object <i>ObjectName</i></code></td>
    <td><code>Object create <i>ObjectName</i></code></td>
  </tr>
  <tr>
    <td><code>::xotcl::Class <i>ClassName</i></code></td>
    <td><code>::nx::Class create <i>ClassName</i></code></td>
  </tr>
  <tr>
    <td><code>::xotcl::Object <i>ObjectName</i></code></td>
    <td><code>::nx::Object create <i>ObjectName</i></code></td>
  </tr>
</table>

<h2>Defining Methods</h2>

<h3>Scripted Methods Defined in the Init-block of a Class/Object or with
Separate Calls</h3>

<table border= '1'>
  <tr><th>XOTcl</th><th>Next Scripting Language</th></tr>
  <tr>
    <td><code>Class <i>C</i><br>
      <i>C</i> instproc <i>foo args</i> {...}<br>
      <i>C</i> proc <i>bar args</i> {...}<br>
      </code></td>
    <td>
      <i class='comment'># Define method and class-object method <br># in the init-block of a class</i></br><br>
      <code>Class create <i>C</i> {<br>
      &nbsp;&nbsp;:method <i>foo args</i> {...}<br>
      &nbsp;&nbsp;:class-object method <i>bar args</i> {...}<br>
      }<br></code><hr>
      <i class='comment'># Define method and class-object method with separate calls</i></br><br>
      <code>Class create <i>C</i><br>
      <i>C</i> method <i>foo args</i> {...}<br>
      <i>C</i> class-object method <i>bar args</i> {...}<br>
     </code></td>
  </tr>
  <tr>
    <td><code>Object <i>o</i><br>
      <i>o</i> set <i>x 1</i><br>
      <i>o</i> proc <i>foo args</i> {...}<br>
      </code></td>
    <td>
      <i class='comment'># Define class-object method and set instance variable<br>
      # in the init-block of an object</i></br><br>
      <code>Object create <i>o</i> {<br>
      &nbsp;&nbsp;set :<i>x 1</i><br>
      &nbsp;&nbsp;:method <i>foo args</i> {...}<br>
     }<br></code><hr>
      <i class='comment'># Define class-object method and set instance variable<br>
      # with separate commands</i></br><br>
      <code>Object create <i>o</i><br>
      <i>o</i> eval {set <i>:x 1</i>}</i><br>
     <i>o</i> method <i>foo args</i> {...}<br>
     </code></td>
   </tr>
 </table>
 
 <h3>Define Different Kinds of Methods</h3>
 <table border= '1'>
   <tr><th>XOTcl</th><th>Next Scripting Language</th></tr>

   <tr>
   <td>
     <i class='comment'># Methods for defining methods:<br>#<br>
     #&nbsp;&nbsp;&nbsp;&nbsp; proc <br>
     #&nbsp;&nbsp;&nbsp;&nbsp; instproc <br>
     #&nbsp;&nbsp;&nbsp;&nbsp; forward <br>
     #&nbsp;&nbsp;&nbsp;&nbsp; instforward <br>
     #&nbsp;&nbsp;&nbsp;&nbsp; parametercmd <br>
     #&nbsp;&nbsp;&nbsp;&nbsp; instparametercmd <br>
     # <br>
     # All these methods return empty.<br>     
     </i>
   </td>
    <td>
     <i class='comment'># Methods for defining methods:<br>#<br>
     #&nbsp;&nbsp;&nbsp;&nbsp; method <br>
     #&nbsp;&nbsp;&nbsp;&nbsp; forward <br>
     #&nbsp;&nbsp;&nbsp;&nbsp; setter <br>
     #&nbsp;&nbsp;&nbsp;&nbsp; alias <br>
     #&nbsp;&nbsp;&nbsp;&nbsp; attribute <br>
     # <br>
     # All these methods return method-handles.<br>
      </i>
    </td>
  </tr>
   
   <tr>
    <td>
      <code>Class <i>C</i><br>
      <i>C</i> instproc <i>foo args</i> {...}<br>
      <i>C</i> proc <i>bar args</i> {...}<br><br>
      <code>Object <i>o</i><br>
      <i>o</i> proc <i>baz args</i> {...}<br>
      </code>
    </td>
    <td>
      <i class='comment'># Define scripted methods</i></br><br>
      <code>Class create <i>C</i> {<br>
      &nbsp;&nbsp;:method <i>foo args</i> {...}<br>
      &nbsp;&nbsp;:class-object method <i>bar args</i> {...}<br>
      }<br><br>
      <code>Object create <i>o</i> {<br>
      &nbsp;&nbsp;:method <i>baz args</i> {...}<br>
      }<br>
     </code></td>
  </tr>

   <tr>
    <td>
      <code>Class <i>C</i><br>
      <i>C</i> instforward <i>f1 ...</i><br>
      <i>C</i> forward <i>f2 ...</i><br><br>
      <code>Object <i>o</i><br>
      <i>o</i> forward <i>f3 ...</i><br>
      </code>
    </td>
    <td>
      <i class='comment'># Define forwarder</i></br><br>
      <code>Class create <i>C</i> {<br>
      &nbsp;&nbsp;:forward <i>f1 ...</i><br>
      &nbsp;&nbsp;:class-object forward <i>f2 ...</i><br>
      }<br><br>
      <code>Object create <i>o</i> {<br>
      &nbsp;&nbsp;:forward <i>f3 ...</i><br>
      }<br>
     </code></td>
  </tr>

   <tr>
    <td>
      <code>Class <i>C</i><br>
      <i>C</i> instparametercmd <i>p1</i><br>
      <i>C</i> parametercmd <i>p2</i><br><br>
      <code>Object <i>o</i><br>
      <i>o</i> parametercmd <i>p3</i><br>
      </code>
    </td>
    <td>
      <i class='comment'># Define setter and getter methods</i></br><br>
      <code>Class create <i>C</i> {<br>
      &nbsp;&nbsp;:setter <i>p1 ?value_constraint?</i><br>
      &nbsp;&nbsp;:class-object setter <i>p2 ?value_constraint?</i><br>
      }<br><br>
      <code>Object create <i>o</i> {<br>
      &nbsp;&nbsp;:setter <i>p3 ?value_constraint?</i><br>
      }<br>
     </code></td>
  </tr>

   <tr>
    <td>
      <i class='comment'># Method "alias" not available</i></br><br>
    </td>
    <td>
      <i class='comment'># Define method aliases<br
       ># (to scripted or non-scripted methods)</i></br><br>
      <code>Class create <i>C</i> {<br>
      &nbsp;&nbsp;:alias <i>a1 ...</i><br>
      &nbsp;&nbsp;:class-object alias <i>a2 ...</i><br>
      }<br><br>
      <code>Object create <i>o</i> {<br>
      &nbsp;&nbsp;:alias <i>a3 ...</i><br>
      }<br>
     </code></td>
   </tr>

   <tr>
    <td>
      <i class='comment'># Parameters only available at class level</i></br><br>
      <code>Class <i>C</i> \<br>&nbsp;&nbsp; -parameter {<i><br>
      &nbsp;&nbsp;&nbsp;&nbsp;x<br>
      &nbsp;&nbsp;&nbsp;&nbsp;{y 1}<br>
      </i>}<br>
      </code>
    </td>
    <td>
      <i class='comment'># Define object attributes<br># (parameters for initializing objects)</i></br><br>
      <code>Class create <i>C</i> {<br>
      &nbsp;&nbsp;:attribute <i>x</i><br>
      &nbsp;&nbsp;:attribute <i>{y 1}</i><br>
      &nbsp;&nbsp;:class-object attribute <i>oa1</i><br>
      }<br><br>
      <code>Object create <i>o</i> {<br>
      &nbsp;&nbsp;:attribute <i>oa2</i><br>
      }<br>
      <hr>
      Class create <i>C</i> \<br>&nbsp;&nbsp; -attributes {<i><br>
      &nbsp;&nbsp;&nbsp;&nbsp;x<br>
      &nbsp;&nbsp;&nbsp;&nbsp;{y 1}<br>
      </i>}<br>
     </code></td>
  </tr>
</table>

<h3>Method Modifiers and Method Protection</h3>

<table border= '1'>
  <tr><th>XOTcl</th><th>Next Scripting Language</th></tr>
 
   <tr>
    <td><i class='comment'># Method modifiers<br>
      #<br>
      #&nbsp;&nbsp; "object",<br>
      #&nbsp;&nbsp; "public", and <br>
      #&nbsp;&nbsp; "protected"<br>
      #<br>
      # are not available.</i><br><br>
   </td>
    <td>
      <i class='comment'># Method modifiers orthogonal over all kinds of methods<br>
      #<br>
      # Method-definition-methods: <br>
      # &nbsp;&nbsp; method, forward, setter, alias, attribute
     </i></br><br>
      <code>Class create <i>C</i> {<br>
      &nbsp;&nbsp;:<i>method-definiton-method ...</i><br>
      &nbsp;&nbsp;:public <i>method-definiton-method ...</i><br>
      &nbsp;&nbsp;:protected <i>method-definiton-method ...</i><br>
      &nbsp;&nbsp;:class-object <i>method-definiton-method ...</i><br>
      &nbsp;&nbsp;:protected object <i>method-definiton-method ...</i><br>
      &nbsp;&nbsp;:public object <i>method-definiton-method ...</i><br>
      }<br>
     </code></td>
  </tr>

</table>

<h2>Resolvers</h2>

The Next Scripting Framework defines Tcl resolvers for method and
variable names to refer to object specific behavior. Withing method
bodies these resolver treat variable and function names starting with
a colon ":" specially. In short, a colon-prefixed variable name refers
to an instance variable, and a colon-prefixed function name refers to
a method. The sub-sections below provide detailed examples.

<p>Note that the Next resolvers can be used in the XOTcl 2.* environment
as well.

<h3>Invoking Methods</h3>
<table border= '1'>
  <tr><th>XOTcl</th><th>Next Scripting Language</th></tr>
  <tr>
    <td><code>Class <i>C</i><br>
      <i>C</i> instproc <i>foo args</i> {...}<br>
      <i>C</i> instproc <i>bar args</i> {<br>
      &nbsp;&nbsp;my <i>foo 1 2 3</i> <i class='comment'> ;# invoke own method</i><br>
      &nbsp;&nbsp;<i>o baz</i> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i
      class='comment'>;# invoke other objects method</i><br>
      }<br>
      Object <i>o</i><br>
      <i>o</i> proc <i>baz</i> {} {...}<br>
     </code></td>
     <td><code>Class create <i>C</i> {<br>
      &nbsp;&nbsp;:method <i>foo args</i> {...}<br>
      &nbsp;&nbsp;:method <i>bar args</i> {<br>
      &nbsp;&nbsp;&nbsp;&nbsp; :<i>foo 1 2 3</i> <i class='comment'>;# invoke own method</i><br>
      &nbsp;&nbsp;&nbsp;&nbsp; <i>o baz</i> &nbsp;&nbsp;&nbsp;&nbsp;<i
       class='comment'>;# invoke other objects method</i><br>
      &nbsp;&nbsp;}<br>
      }</br>
      Object create <i>o</i> {<br>
      &nbsp;&nbsp;:method <i>baz</i> {} {...}<br>
      }</br>
      </code></td>
    </tr>
</table>


<h3>Accessing Own Instance Variables from Method Bodies</h3>

<p>In general, the Next Scripting Language favors the access to an
objects's own instance variables over variable accesses of other
objects. On the contrary, in XOTcl, the variable access to own and
other variables are completely symmetric.

<p>In Next Scripting, access to local variables are performed via
primarily via name resolvers, but using the standard tcl commands
(like e.g. <code>set</code>, <code>incr</code>, <code>append</code>,
<code>info exists</code>, etc.). In XOTcl, it is common to provide
same-named methods registered on <code>::xotcl::Object</code> for such
purposes. This is one of the reasons, why the Next Scripting Language
has a much smaller interface (less predefined methods). It is possible
for an application program to register XOTcl-like methods in the Next
Scripting Language via the primitives of the Next Scripting Framework.

<p>
<table border= '1'>
  <tr><th>XOTcl</th><th>Next Scripting Language</th></tr>
  <tr>
    <td><code>Class <i>C</i><br>
      <i>C</i> instproc <i>foo args</i> {<br>
      &nbsp;&nbsp;<i class='comment'># Method scoped variable a</i><br>
      &nbsp;&nbsp;set <i>a 1</i> <br>
      &nbsp;&nbsp;<i class='comment'># Instance variable b</i><br>
      &nbsp;&nbsp;my instvar b<br>
      &nbsp;&nbsp;set<i> b 2</i><br>
      &nbsp;&nbsp;<i class='comment'># Global variable/namespaced variable c</i><br>
      &nbsp;&nbsp;set <i>::c 3</i><br>
    }<br>
      </code></td>
    <td><code>Class create <i>C</i> {<br>
      &nbsp;&nbsp;:method <i>foo args</i> {...}<br>
      &nbsp;&nbsp;&nbsp;&nbsp;<i class='comment'># Method scoped variable a</i><br>
      &nbsp;&nbsp;&nbsp;&nbsp;set <i>a 1</i> <br>
      &nbsp;&nbsp;&nbsp;&nbsp;<i class='comment'># Instance variable b</i><br>
      &nbsp;&nbsp;&nbsp;&nbsp;set <i>:b 2</i><br>
      &nbsp;&nbsp;&nbsp;&nbsp;<i class='comment'># Global variable/namespaced variable c</i><br>
      &nbsp;&nbsp;&nbsp;&nbsp;set <i>::c 3</i><br>
      &nbsp;&nbsp;}<br>
      }<br>
     </code></td>
  </tr>
  <tr>
    <td><code>
      <i>...</i> instproc <i>...</i> {<br>
      &nbsp;&nbsp; my set <i>varname value</i><br>
      }
      </code></td>
    <td>
      <i class='comment'># Set own instance variable to a value via
      resolver <br># (prefered and fastest way)</i></br><br>
      <code>
      <i>...</i> method <i>...</i> {<br>
     &nbsp;&nbsp; set <i>:newVar value</i><br>
      }
      </code>
    </td>
  </tr>
  <tr>
    <td><code>
      <i>...</i> instproc <i>...</i> {<br>
      &nbsp;&nbsp; my instvar <i>newVar</i><br>
      &nbsp;&nbsp; set <i>newVar value</i><br>
      }
      </code></td>
   <td>
      <i class='comment'># Set own instance variable via variable import</i><br><br>
      <code>
     <i>...</i> method <i>...</i> {<br>
     &nbsp;&nbsp; ::nx::var import [self] <i>varname</i><br>
     &nbsp;&nbsp; set <i>varname value</i></br>
     }</code>
    </td>
 </tr>
 
   <tr>
    <td>
    <code>
      <i>...</i> instproc <i>...</i> {<br>
      &nbsp;&nbsp; set <i>newVar</i> [my set <i>otherVar</i>]<br>
      }
      </code></td>
    <td>
      <i class='comment'># Read own instance variable</i><br><br>
      <code>
      <i>...</i> method <i>...</i> {<br>
      &nbsp;&nbsp; set <i>newVar</i> [set <i>:otherVar</i>]<br>
      }
      </code><br><hr>
      <code>
      <i>...</i> method <i>...</i> {<br>
      &nbsp;&nbsp; set <i>newVar</i> ${:otherVar}</i><br>
      }
      </code>
    </td>
  </tr>
  
  <tr>
    <td><code>
      <i>...</i> instproc <i>...</i> {<br>
      &nbsp;&nbsp; my exists <i>varname</i><br>
      }
      </code></td>
    <td>
      <i class='comment'># Test existence of own instance variable</i><br><br>
      <code>
      <i>...</i> method <i>...</i> {<br>
      &nbsp;&nbsp; info :<i>varname</i><br>
      }
      </code>
      <hr>
      <code>
      <i>...</i> method <i>...</i> {<br>
      &nbsp;&nbsp; ::nx::var exists [self] <i>varname</i><br>
      }</code>
    </td>
  </tr>
</table>

<h3>Accessing Instance Variables of other Objects</h3>

<table border= '1'>
  <tr><th>XOTcl</th><th>Next Scripting Language</th></tr>
  <tr>
    <td><code><i>obj</i> set <i>varname value</i></code></td>
    <td>
      <i class='comment'># Set instance variable of object obj to a value via<br>
      # resolver (prefered way: define setter method on obj)</i></br><br>
      <code><i>obj</i> eval [list set <i>:varname value</i>]</code></td>
  </tr>
    <tr>
    <td><code>set <i>newVar</i> [<i>obj</i> set <i>otherVar</i>]</code></td>
    <td>
      <i class='comment'># Read instance variable of object obj via resolver</i></br><br>
      <code>set <i>newVar</i> [<i>obj</i> eval {set <i>:otherVar</i>}]</code><br>
    </td>
  </tr>
  <tr>
    <td><code>
      <i>...</i> instproc <i>...</i> {<br>
      &nbsp;&nbsp; <i>obj</i> instvar <i>newVar</i><br>
      &nbsp;&nbsp;  set <i>newVar value</i><br>
      }</code>
    </td>
    <td>
      <i class='comment'># Read instance variable of object obj via import</i></br><br>
      <code>
      <i>...</i> method <i>...</i> {<br>
      &nbsp;&nbsp; ::nx::var import <i>obj newVar</i><br>
      &nbsp;&nbsp;  set <i>newVar value</i><br>
      }</code>
    </td>
 </tr>
  <tr>
    <td><code><i>obj</i> exists <i>varname</i></code></td>
    <td>
      <i class='comment'># Test existence of instance variable of
      object obj</i><br><br>
      <code><i>obj</i> eval {info exists <i>:varname</i>}</code>
      <hr>
      <code>::nx::var exists <i>obj varname</i></code>
    </td>
  </tr>
</table>


<h2>Object Parameters/Attributes</h2>

<table border= '1'>
  <tr><th>XOTcl</th><th>Next Scripting Language</th></tr>
  <tr>
    <td><code>Class <i>Foo </i> -parameter <i>{a {b 1}}</i><br><br>
      <i class='comment'># Create instance of the class Foo</i><br>
      <i>Foo f1 -a 0</i><br><br>
      <i class='comment'># Object f1 has a == 0 and b == 1</i><br>
      <hr>
      Class <i>Foo </i> -slots <i>{</i><br>
      &nbsp;&nbsp;&nbsp;Attribute <i>a</i><br>
      &nbsp;&nbsp;&nbsp;Attribute <i>b</i> -default 1<br>
      }<br>
      <br>
      <i class='comment'># Create instance of the class Foo</i><br>
      <i>Foo f1 -a 0</i><br><br>
      <i class='comment'># Object f1 has a == 0 and b == 1</i><br>
      
      </code>
   </td>
   <td><code>
     Class create <i>Foo </i> -attributes <i>{a {b 1}}</i><br><br>
      <i class='comment'># Create instance of the class Foo</i><br>
      <i>Foo</i> create <i> f1 -a 0</i><br><br>
      <i class='comment'># Object f1 has a == 0 and b == 1</i><br>
     <hr>
     Class create <i>Foo</i> {<br>
      &nbsp;&nbsp;&nbsp;:attribute <i>a</i><br>
      &nbsp;&nbsp;&nbsp;:attribute <i>{b 1}</i><br>
      }</br><br>
      <i class='comment'># Create instance of the class Foo</i><br>
      <i>Foo</i> create <i>f1 -a 0</i><br><br>
      <i class='comment'># Object f1 has a == 0 and b == 1</i><br>      
      </code>
   </td>
  </tr>

  <tr>
    <td><code>
    Class <i>Person</i> -slots</i> {<br>
      &nbsp;&nbsp; Attribute create <i>sex</i> -type <i>"sex"</i> {<br>
      &nbsp;&nbsp;&nbsp;&nbsp; my proc <i>type=sex {name value}</i> {<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; switch -glob <i>$value</i> {<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <i>m*</i> {return <i>m</i>}<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <i>f*</i> {return <i>f</i>}<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; default {error <i>"expected sex but got $value"</i>}<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
      &nbsp;&nbsp;&nbsp;&nbsp; }<br>
      &nbsp;&nbsp; }<br>
      }<br>
      </code>
   </td>
    <td><code>
    Class create <i>Person</i> {<br>
      &nbsp;&nbsp; :attribute <i>sex</i> {<br>
      &nbsp;&nbsp;&nbsp;&nbsp; :type <i>"sex"</i><br>
      &nbsp;&nbsp;&nbsp;&nbsp; :method <i>type=sex {name value}</i> {<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; switch -glob <i>$value</i> {<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <i>m*</i> {return <i>m</i>}<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <i>f*</i> {return <i>f</i>}<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; default {error <i>"expected sex but got $value"</i>}<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>
      &nbsp;&nbsp;&nbsp;&nbsp; }<br>
      &nbsp;&nbsp; }<br>
      }<br>
      </code>
   </td>
  </tr>


   <tr>
    <td><i class='comment'># Predefined value constraints for parameter not available</i>
    </td>
   <td><code>
     <i class='comment'># Predefined value constraints: object, class,
     alnum, alpha,<br>
     # ascii, boolean, control, digit, double, false, graph, <br>
     # integer, lower, print, punct, space, true, upper, <br>
     # wordchar, xdigit</i><br><br>
   Class create <i>Foo </i> -attributes {<br>
     &nbsp;&nbsp; <i>a</i>:boolean<br>
     &nbsp;&nbsp; {<i>b</i>:integer<i> 1</i>}<br>
     }</i><br>
     <hr>
     Class create <i>Foo</i> {<br>
      &nbsp;&nbsp; :attribute <i>a</i>:boolean<br>
      &nbsp;&nbsp; :attribute {<i>b</i>:integer<i> 1</i>}<br>
      }</br>
     </code>
   </td>
  </tr>

   <tr>
    <td><i class='comment'># Required parameter not available</i>
    </td>
   <td><code>
     <i class='comment'># Required parameter </i><br>
   Class create <i>Foo </i> -attributes {<br>
     &nbsp;&nbsp; <i>a</i>:boolean,required<br>
     &nbsp;&nbsp; {<i>b</i>:integer<i> 1</i>}<br>
     }</i><br>
    <hr>
     Class create <i>Foo</i> {<br>
      &nbsp;&nbsp; :attribute <i>a</i>:boolean,required</i><br>
      &nbsp;&nbsp; :attribute {<i>b</i>:integer 1}</i><br>
      }</br>
     </code>
   </td>
  </tr>

   <tr>
    <td><i class='comment'># Multivalued parameter not available</i>
    </td>
   <td><code>
     <i class='comment'># Required parameter </i><br>
   Class create <i>Foo </i> -attributes {<br>
     &nbsp;&nbsp; ...<br>
     &nbsp;&nbsp; <i>ints</i>:integer,multivalued<br>
     &nbsp;&nbsp; {<i>objs</i>:object,multivalued ""}<br>
     }</i><br>
    <hr>
     Class create <i>Foo</i> {<br>
      &nbsp;&nbsp; ...<br>
      &nbsp;&nbsp; :attribute <i>ints</i>:integer,multivalued</i><br>
      &nbsp;&nbsp; :attribute {<i>objs</i>:object,multivalued ""}</i><br>
      }</br>
     </code>
   </td>
  </tr>   
</table>


## allowempty

<h2>Method Parameters</h2>

<h2>Interceptors</h2>

<h3>Register Mixin Classes and Mixin Guards</h3>
<table border= '1'>
  <tr><th>XOTcl</th><th>Next Scripting Language</th></tr>
  <tr>
    <td><code><i>cls</i> instmixin <i>...</i></code><br>
      <code><i>cls</i> instmixinguard <i>mixin condition</i></code>      
    </td>
    <td>
      <i class='comment'># Register per-class mixin and guard for a class</i><br><br>
      <code><i>cls</i> mixin <i>...</i></code><br>
      <code><i>cls</i> mixin guard <i>mixin condition</i></code>
    </td>
  </tr>
  <tr>
    <td>
      <code><i>cls</i> mixin <i>...</i></code><br>
      <code><i>cls</i> mixin guard <i>mixin condition</i></code>
    </td>
    <td>
      <i class='comment'># Register per-object mixin and guard for a class</i><br><br>
      <code><i>cls</i> class-object mixin <i>...</i></code><br>
      <code><i>cls</i> class-object mixin guard <i>mixin condition</i></code><br>
    </td>
  </tr>  
  <tr>
    <td>
      <code><i>obj</i> mixin <i>...</i></code><br>
      <code><i>obj</i> mixinguard <i>mixin condition</i></code>
    </td>
    <td>
      <i class='comment'># Register per-object mixin and guard for an object</i><br><br>
      <code><i>obj</i> mixin <i>...</i></code><br>
      <code><i>obj</i> mixin guard <i>mixin condition</i></code>
    </td>
  </tr>  
</table>


<h3>Register Filters and Filter Guards</h3>
<table border= '1'>
  <tr><th>XOTcl</th><th>Next Scripting Language</th></tr>
  <tr>
    <td><code><i>cls</i> instfilter <i>...</i></code><br>
      <code><i>cls</i> instfilterguard <i>filter condition</i></code>      
    </td>
    <td>
      <i class='comment'># Register per-class filter and guard for a class</i><br><br>
      <code><i>cls</i> filter <i>...</i></code><br>
      <code><i>cls</i> filter guard <i>filter condition</i></code>
    </td>
  </tr>
  <tr>
    <td>
      <code><i>cls</i> filter <i>...</i></code><br>
      <code><i>cls</i> filterguard <i>...</i></code>
    </td>
    <td>
      <i class='comment'># Register per-object filter and guard for a class</i><br><br>
      <code><i>cls</i> class-object filter <i>...</i></code><br>
      <code><i>cls</i> class-object filter guard <i>filter condition</i></code><br>
    </td>
  </tr>  
  <tr>
    <td>
      <code><i>obj</i> filter <i>...</i></code><br>
      <code><i>obj</i> filterguard <i>filter condition</i></code>
    </td>
    <td>
      <i class='comment'># Register per-object filter and guard for an
      object</i><br><br>
      <code><i>obj</i> filter <i>...</i></code><br>
      <code><i>obj</i> filter guard <i>filter condition</i></code>
    </td>
  </tr>  
</table>



<h2>Introspection</h2>

<h4>List methods defined by objects</h4>
<table border= '1'>
  <tr><th>XOTcl</th><th>Next Scripting Language</th></tr>
  <tr>
    <td><code><i>obj</i> info commands <i>?pattern?</i></code></td>
    <td><code><i>obj</i> info methods <i>?pattern?</i></code></td>
  </tr>
  <tr>
    <td><code><i>obj</i> info parametercmd <i>?pattern?</i></code></td>
    <td><code><i>obj</i> info methods -methodtype setter <i>?pattern?</i></code></td>
  </tr>
  <tr>
    <td><code><i>obj</i> info procs <i>?pattern?</i></code></td>
    <td><code><i>obj</i> info methods -methodtype scripted <i>?pattern?</i></code></td>
  </tr>
  <tr>
    <td><i>n.a.</i></td>
    <td><code><i>obj</i> info methods -methodtype alias <i>?pattern?</i></code></td>
  </tr>
  <tr>
    <td><i>n.a.</i></td>
    <td><code><i>obj</i> info methods -methodtype forwarder <i>?pattern?</i></code></td>
  </tr>
  <tr>
    <td><i>n.a.</i></td>
    <td><code><i>obj</i> info methods -methodtype object <i>?pattern?</i></code></td>
  </tr>
  <tr>
    <td><i>n.a.</i></td>
    <td><code><i>obj</i> info methods -callprotection <i>public|protected ...</i></code></td>
  </tr>
</table>
<h4>List methods defined by classes</h4>
<table>
  <tr>
    <td><code><i>cls</i> info instcommands <i>?pattern?</i></code></td>
    <td><code><i>cls</i> info methods <i>?pattern?</i></code></td>
  </tr>
  <tr>
    <td><code><i>cls</i> info instparametercmd <i>?pattern?</i></code></td>
    <td><code><i>cls</i> info methods -methodtype setter <i>?pattern?</i></code></td>
  </tr>
  <tr>
    <td><code><i>cls</i> info instprocs <i>?pattern?</i></code></td>
    <td><code><i>cls</i> info methods -methodtype scripted <i>?pattern?</i></code></td>
  </tr>
  <tr>
    <td><i>n.a.</i></td>
    <td><code><i>cls</i> info methods -methodtype alias <i>?pattern?</i></code></td>
  </tr>
  <tr>
    <td><i>n.a.</i></td>
    <td><code><i>cls</i> info methods -methodtype forwarder <i>?pattern?</i></code></td>
  </tr>
  <tr>
    <td><i>n.a.</i></td>
    <td><code><i>cls</i> info methods -methodtype object <i>?pattern?</i></code></td>
  </tr>
  <tr>
    <td><i>n.a.</i></td>
    <td><code><i>cls</i> info methods -callprotection <i>public|protected ...</i></code></td>
  </tr>  
</table>

<h4>List class object specific methods</h4>
<table>
  <tr>
    <td><code><i>cls</i> info commands <i>?pattern?</i></code></td>
    <td><code><i>cls</i> class-object info methods <i>?pattern?</i></code></td>
  </tr>
  <tr>
    <td><code><i>cls</i> info parametercmd <i>?pattern?</i></code></td>
    <td><code><i>cls</i> class-object info methods -methodtype setter <i>?pattern?</i></code></td>
  </tr>
  <tr>
    <td><code><i>cls</i> info procs <i>?pattern?</i></code></td>
    <td><code><i>cls</i> class-object info methods -methodtype scripted <i>?pattern?</i></code></td>
  </tr>
  <tr>
    <td><i>n.a.</i></td>
    <td><code><i>cls</i> class-object info methods -methodtype alias <i>?pattern?</i></code></td>
  </tr>
  <tr>
    <td><i>n.a.</i></td>
    <td><code><i>cls</i> class-object info methods -methodtype forwarder <i>?pattern?</i></code></td>
  </tr>
  <tr>
    <td><i>n.a.</i></td>
    <td><code><i>cls</i> class-object info methods -methodtype object <i>?pattern?</i></code></td>
  </tr>
  <tr>
    <td><i>n.a.</i></td>
    <td><code><i>cls</i> class-object info methods -callprotection <i>public|protected ...</i></code></td>
  </tr> 
</table>

<h4>List callable methods</h4>
<table border= '1'>
  <tr><th>XOTcl</th><th>Next Scripting Language</th></tr>
  <tr>
    <td><code><i>obj</i> info methods <i>?pattern?</i></code></td>
    <td><code><i>obj</i> info lookup methods <i>... ?pattern?</i><br>
      <i class='comment'># Returns list of method names</i>
      </code></td>
  </tr>
  <tr>
    <td><i>n.a.</i></td>
    <td><code><i class='comment'># List only application specific methods</i></code><br>
      <code><i>obj</i> info lookup methods -source application <i>... ?pattern?</i><br>
      <i class='comment'># Returns list of method names</i>
      </code></td>
  </tr>

  <tr>
    <td><code><i class='comment'># Options for 'info methods'<br>
      #<br>
      # -incontext<br>
      # -nomixins <br>
      </i>
     </code></td>    
    <td><code><i class='comment'># Options for 'info lookup
      methods'<br>
      #<br>
      # -source ...<br>
      # -callprotection ...<br>
      # -incontext<br>
      # -methodtype ...<br>
      # -nomixins <br>
      </i>
     </code></td>
  </tr>

  <tr>
    <td><i>n.a.</i></td>
    <td><code><i class='comment'># List slot objects defined for obj</i></code><br>
      <code><i>obj</i> info lookup slots<br>
      <i class='comment'># Returns list of slot objects</i>
      </code></td>
  </tr>
</table>

<h4>List object/class where some method is defined</h4>

<table border= '1'>
  <tr><th>XOTcl</th><th>Next Scripting Language</th></tr>
  <tr>
    <td><code><i>obj</i> procsearch <i>methodName</i></code></td>
    <td><code><i>obj</i> info lookup method <i>methodName</i><br>
      <i class='comment'># Returns method-handle</i></code></td>
  </tr>
  <tr>
    <td><code><i>obj</i> filtersearch <i>methodName</i></code></td>
    <td><code><i>obj</i> info lookup filter <i>methodName</i><br>
      <i class='comment'># Returns method-handle</i></code></td>
  </tr>  
</table>

<h4>List definition of scripted methods defined by classes</h4>

<table border= '1'>
  <tr><th>XOTcl</th><th>Next Scripting Language</th></tr>
  <tr>
    <td><code><i>cls</i> info instbody <i>methodName</i></code></td>
    <td><code><i>cls</i> info method body <i>methodName</i></code></td>
  </tr>
  <tr>
    <td><code><i>cls</i> info instargs <i>methodName</i></code></td>
    <td><code><i>cls</i> info method args <i>methodName</i></code></td>
  </tr>
  <tr>
    <td><code><i>cls</i> info instnonposargs <i>methodName</i></code></td>
    <td><code><i>cls</i> info method parameter <i>methodName</i></code></td>
  </tr>
  <tr>
    <td><code><i>cls</i> info instdefault <i>methodName</i></code></td>
    <td><code><i>cls</i> info method parameter <i>methodName</i></code></td>
  </tr>
  <tr>
    <td><code><i>cls</i> info instpre <i>methodName</i></code></td>
    <td><code><i>cls</i> info method precondition <i>methodName</i></code></td>
  </tr>
  <tr>
    <td><code><i>cls</i> info instpost <i>methodName</i></code></td>
    <td><code><i>cls</i> info method postcondition <i>methodName</i></code></td>
  </tr>
  <tr>
    <td><i>n.a.</i></td>
    <td><code><i>cls</i> info method definition <i>methodName</i></code></td>
  </tr>  
</table>

<h4>List definition of scripted object specific methods</h4>

<table>
  <tr><th>XOTcl</th><th>Next Scripting Language</th></tr>
  <tr>
    <td><code><i>obj</i> info body <i>methodName</i></code></td>
    <td><code><i>obj</i> info method body <i>methodName</i></code></td>
  </tr>
  <tr>
    <td><code><i>obj</i> info args <i>methodName</i></code></td>
    <td><code><i>obj</i> info method args <i>methodName</i></code></td>
  </tr>
  <tr>
    <td><code><i>obj</i> info nonposargs <i>methodName</i></code></td>
    <td><code><i>obj</i> info method parameter <i>methodName</i></code></td>
  </tr>
  <tr>
    <td><code><i>obj</i> info default <i>methodName</i></code></td>
    <td><code><i>obj</i> info method parameter <i>methodName</i></code></td>
  </tr>
  <tr>
    <td><code><i>obj</i> info pre <i>methodName</i></code></td>
    <td><code><i>obj</i> info method precondition <i>methodName</i></code></td>
  </tr>
  <tr>
    <td><code><i>obj</i> info post <i>methodName</i></code></td>
    <td><code><i>obj</i> info method postcondition <i>methodName</i></code></td>
  </tr>
  <tr>
    <td><i>n.a.</i></td>
    <td><code><i>obj</i> info method definition <i>methodName</i></code></td>
  </tr>  
</table>
<p>For definition of class object specific methods, use modifier
  <code>object</code> as shown in examples above.
</p>

<h4>List Filter or Mixins</h4>
<table>
  <tr><th>XOTcl</th><th>Next Scripting Language</th></tr>
  <tr>
    <td><code><i>obj</i> info filter <i>?-guards? ?-order? ?pattern?</i></code></td>
    <td><i class='comment'># ... info filter methods -order ... returns method-handles<br>
      # instead of triples (applies to all three variants)</i><br><br>
      <code><i>obj</i> info filter methods <i>?-guards? ?-order? ?pattern?</i></code></td>
  </tr>
  <tr>
    <td><code><i>obj</i> info filterguard <i>name</i></code></td>
    <td><code><i>obj</i> info filter guard <i>name</i><!-- <br>
      <hr><i>obj</i> filter guard <i>name</i><br> -->
      </code></td>
  </tr>  
  <tr>
    <td><code><i>cls</i> info filter <i>?-guards? ?-order? ?pattern?</i></code></td>
    <td><code><i>cls</i> class-object info filter methods <i>?-guards? ?-order? ?pattern?</i></code></td>
  </tr>

  <tr>
    <td><code><i>cls</i> info filterguard <i>name</i></code></td>
    <td><code><i>cls</i> class-object info filter guard <i>name</i><!-- <br>
      <hr><i>cls</i> class-object filter guard <i>name</i><br></code>--></td>
  </tr>  
  
  <tr>
    <td><code><i>cls</i> info instfilter <i>?-guards? ?-order? ?pattern?</i></code></td>
    <td><code><i>cls</i> info filter methods <i>?-guards? ?-order? ?pattern?</i></code></td>
  </tr>
  <tr>
    <td><code><i>cls</i> info instfilterguard <i>name</i></code></td>
    <td><code><i>cls</i> info filter guard <i>name</i><!-- <br>
      <hr><i>cls</i> filter guard <i>name</i>--></code></td>
  </tr>  
  
  <tr>
    <td><code><i>obj</i> info mixin <i>?-guards? ?-order? ?pattern?</i></code></td>
    <td><code><i>obj</i> info mixin classes <i>?-guards? ?-order? ?pattern?</i></code></td>
  </tr>
  
  <tr>
    <td><code><i>obj</i> info mixinguard <i>name</i></code></td>
    <td><code><i>obj</i> info mixin guard <i>name</i><!-- <br>
      <hr><i>obj</i> mixin guard <i>name</i><br></code>--></td>
  </tr>
  
  <tr>
    <td><code><i>cls</i> info mixin <i>?-guards? ?-order? ?pattern?</i></code></td>
    <td><code><i>cls</i> class-object info mixin classes <i>?-guards? ?-order? ?pattern?</i></code></td>
  </tr>

  <tr>
    <td><code><i>cls</i> info mixinguard <i>name</i></code></td>
    <td><code><i>cls</i> class-object info mixin guard <i>name</i><!--<br>
      <hr><i>cls</i> class-object mixin guard <i>name</i><br>--></code></td>
  </tr>
  
  <tr>
    <td><code><i>cls</i> info instmixin <i>?-guards? ?-order? ?pattern?</i></code></td>
    <td><code><i>cls</i> info mixin classes <i>?-guards? ?-order? ?pattern?</i></code></td>
  </tr>
  
  <tr>
    <td><code><i>cls</i> info instmixinguard <i>name</i></code></td>
    <td><code><i>cls</i> info mixin guard <i>name</i><!-- <br>
      <hr><i>cls</i> mixin guard <i>name</i><br>--></code></td>
  </tr>  
</table>

<h4>List definition of methods defined by aliases, setters or forwarders</h4>
<table>
  <tr><th>XOTcl</th><th>Next Scripting Language</th></tr>
  <tr>
    <td><i>n.a.</i></td>
    <td><code><i>obj</i> info method definition <i>methodName</i></code></td>
  </tr>
  <tr>
    <td><i>n.a.</i></td>
    <td><code><i>cls</i> info method definition <i>methodName</i></code></td>
  </tr>  
</table>

<h4>List fully qualified name of method</h4>
<table>
  <tr><th>XOTcl</th><th>Next Scripting Language</th></tr>
  <tr>
    <td><i>n.a.</i></td>
    <td><code><i>obj</i> info method handle <i>methodName</i></code></td>
  </tr>
  <tr>
    <td><i>n.a.</i></td>
    <td><code><i>cls ?object?</i> info method handle <i>methodName</i></code></td>
  </tr>  
</table>

<h4>List type of a method</h4>
<table>
  <tr><th>XOTcl</th><th>Next Scripting Language</th></tr>
  <tr>
    <td><i>n.a.</i></td>
    <td><code><i>obj</i> info method type <i>methodName</i></code></td>
  </tr>
  <tr>
    <td><i>n.a.</i></td>
    <td><code><i>cls ?object?</i> info method type <i>methodName</i></code></td>
  </tr>  
</table>

<h4>List the scope of mixin classes</h4>
<table>
  <tr><th>XOTcl</th><th>Next Scripting Language</th></tr>
  <tr>
    <td><code><i>cls</i> info mixinof <i>?-closure? ?pattern?</i></code></td>
    <td>
      <i class='comment'># List objects, where cls is a per-object mixin</i></br><br>
      <code><i>cls</i> info mixinof -scope object <i>?-closure?
      ?pattern?</i></code>
    </td>
  </tr>
  <tr>
    <td><code><i>cls</i> info instmixinof <i>?-closure? ?pattern?</i></code></td>
    <td>
      <i class='comment'># List classes, where cls is a per-class mixin</i></br><br>
      <code><i>cls</i> info mixinof -scope class <i>?-closure?
      ?pattern?</i></code>
    </td>
  </tr>
  <tr>
    <td><i>n.a.</i></td>
    <td>
      <i class='comment'># List objects and classes, where cls is<br>
      # either a per-object or a per-class mixin</i></br><br>
      <code><i>cls</i> info mixinof -scope all <i>?-closure?
      ?pattern?</i></code>
      <br><hr>
      <code><i>cls</i> info mixinof <i>?-closure? ?pattern?</i></code>
    </td>
  </tr>
</table>

<h4>Check properties of object and classes</h4>

<table>
  <tr><th>XOTcl</th><th>Next Scripting Language</th></tr>
  <tr>
    <td><code><i>obj</i> istype <i>sometype</i></code></td>
    <td>
     <code><i>obj</i> info has type <i>sometype</i></code>
    </td>
  </tr>
  <tr>
    <td><code><i>obj</i> ismixin <i>cls</i></code></td>
    <td>
     <code><i>obj</i> info has mixin <i>cls</i></code>
    </td>
  </tr>
  <tr>
    <td><code><i>obj</i> isclass <i>?cls?</i></code></td>
    <td>
     <code><i>obj</i> info is class</code>
    </td>
  </tr>
  <tr>
    <td><code><i>obj</i> ismetaclass <i>cls</i></code></td>
    <td>
      <code><i>obj</i> info is metaclass</code>
    </td>
  </tr>
  <tr>
    <td><i>n.a.</i></td>
   <td>
      <code><i>obj</i> info is baseclass</code>
    </td>
  </tr>  
 <tr>
    <td><code><i>obj</i> isobject <i>obj2</i></code></td>
    <td><code>::nsf::isobject <i>obj</i></code>
   </td>
  </tr>
</table>

<h3>Callstack Introspection</h3>

<table>
  <tr><th>XOTcl</th><th>Next Scripting Language</th></tr>
  <tr>
    <td><code>self</code></td>
    <td><code>current</code><br>
      <hr>
      <code>current object</code> 
    </td>
  </tr>
  <tr>
    <td><code>self class</code></td>
    <td><code>current class</code></td>
  </tr>
  <tr>
    <td><code>self proc</code></td>
    <td><code>current method</code></td>
  </tr>
    <tr>
    <td><code>self callingclass</code></td>
    <td><code>current currentclass</code></td>
  </tr>
  <tr>
    <td><code>self callingobject</code></td>
    <td><code>current callingobject</code></td>
  </tr>
    <tr>
    <td><code>self callingproc</code></td>
    <td><code>current callingmethod</code></td>
  </tr>
  <tr>
    <td><code>self calledclass</code></td>
    <td><code>current calledclass</code></td>
  </tr>
  <tr>
    <td><code>self calledproc</code></td>
    <td><code>current calledmethod</code></td>
  </tr>
  <tr>
    <td><code>self isnextcall</code></td>
    <td><code>current isnextcall</code></td>
  </tr>
    <tr>
    <td><code>self next</code></td>
    <td><i class='comment'># Returns method-handle</i><br>
      <code>current next</code></td>
  </tr>
  <tr>
    <td><code>self filterreg</code></td>
    <td><i class='comment'># Returns method-handle</i><br>
      <code>current filterreg</code></td>
  </tr>
    <tr>

    <td><code>self callinglevel</code></td>
    <td><code>current callinglevel</code></td>
  </tr>
    <tr>
    <td><code>self activelevel</code></td>
    <td><code>current activelevel</code></td>
  </tr> 
</table>


<h2>Other Predefined Methods</h2>


<table>
  <tr><th>XOTcl</th><th>Next Scripting Language</th></tr>
  <tr>
    <td><code><i>obj</i> requireNamespace</code></td>
    <td><code><i>obj</i> require namespace</code></td>
 </tr>
</table>



<h2>Dispatch, Aliases, etc.</h2>
<h2>Assertions</h2>

<table border= '1'>
  <tr><th>XOTcl</th><th>Next Scripting Language</th></tr>
  <tr>
    <td><code><i>obj</i> check <i>checkoptions</i></code></td>
    <td><code>::nsf::assertion <i>obj</i> check <i>checkptions</i></code></td>
  </tr>
  <tr>
    <td><code><i>obj</i> info check</code></td>
    <td><code>::nsf::assertion <i>obj</i> check</code></td>
  </tr>
  
  <tr>
    <td><code><i>obj</i> invar <i>conditions</i></code></td>
    <td><code>::nsf::assertion <i>obj</i> object-invar <i>conditions</i></code></td>
  </tr>
  <tr>
    <td><code><i>obj</i> info invar</code></td>
    <td><code>::nsf::assertion <i>obj</i> object-invar</code></td>
  </tr>
  
  <tr>
    <td><code><i>cls</i> instinvar <i>conditions</i></code></td>
    <td><code>::nsf::assertion <i>cls</i> class-invar <i>conditions</i></code></td>
  </tr>
  <tr>
    <td><code><i>cls</i> info instinvar</code></td>
    <td><code>::nsf::assertion <i>cls</i> class-invar</code></td>
  </tr>

    <tr>
    <td><code><i>cls</i> invar <i>conditions</i></code></td>
    <td><code>::nsf::assertion <i>cls</i> object-invar <i>conditions</i></code></td>
  </tr>
  <tr>
    <td><code><i>cls</i> info invar</code></td>
    <td><code>::nsf::assertion <i>cls</i> object-invar</code></td>
  </tr>
  
</table>
<h2>Method Protection</h2>


<h2>Incompatibilities between XOTcl 2.0 and XOTcl 1.*</h2>

<h3>Resolvers</h3>

<p>The resolvers (variable resolvers, function resolvers) of the Next
Scripting Framework are used as well within XOTcl 2.0. When names
starting with single colons are used in XOTcl 1.* scripts, conflicts
will arise.  </p>

<h3>Calling objects like methods</h3>

<p>Since the next framework uses a different handling of objects
registered as methods (so called ensemble objects), sub-objects can't
be called in the same way as before. In XOTcl 1.*, it was possible to
call e.g. a method <code>foo</code> of the slot object
<code>Foo::slot::ints</code> via
<ul><li><code>Foo::slot::ints foo ...</code> or via
  <li><code>Foo slot ints foo ...</code>
</ul>
Now, only the first form
has the same semantic as before. In the second form (call of objects
via method) has now the ensemble object semantics, <code>self</code>
of <code>foo</code> is now the calling object <code>Foo</code>.


<h3>Slots</h3>

<p>All slot objects (also those in XOTcl) are now always
next-scripting objects of baseclass <code>::nx::Slot</code>.
The name of the experimental default-setter <code>initcmd</code> was
changed to <code>defaultcmd</code>.
</p>

<h3>Obsolete commands</h3>

<p>Parameterclasses were rarely used and have been replaced by the more
general object parameterization. Therefore, <code>cl info
parameterclass</code> has been removed. 

<h3>Stronger Checking</h3>

<p>The Next Scripting Framework performs stronger checking than XOTcl
1.*. For example, the requiredness of slots in XOTcl was just a
comment, while Next enforces it. </p>

<h3>Exit Handlers</h3>
<p>
The exit hander interface changed from a method of
<code>::xotcl::Object</code> into the tcl command <code>::nsf::exithandler</code>:
<pre>
   ::nsf::exithandler set|get|unset ?arg?
</pre>


<hr>
<address></address>
<!-- hhmts start --> Last modified: Fri Oct  1 11:58:31 CEST 2010 <!-- hhmts end -->
</body>
</html>
